id: io.github.dyslechtchitect.tfcbm
runtime: org.gnome.Platform
runtime-version: '49'
sdk: org.gnome.Sdk
command: tfcbm

cleanup:
  - /include
  - /lib/pkgconfig
  - /share/man
  - '*.la'
  - '*.a'

finish-args:
  # Display and IPC - Required for GTK4 applications
  - --share=ipc                                      # Required: Inter-process communication for GTK
  - --socket=wayland                                 # Required: Wayland display server support
  - --socket=fallback-x11                            # Required: X11 fallback for systems without Wayland
  - --device=dri                                     # Required: Hardware acceleration for GTK/EGL rendering

  # D-Bus services - Required for GNOME Shell extension communication
  - --talk-name=org.freedesktop.secrets              # Required: Secure storage for "Secret Items" feature
  - --own-name=io.github.dyslechtchitect.tfcbm.ClipboardService  # Required: D-Bus service for extension IPC
  - --talk-name=io.github.dyslechtchitect.tfcbm.Extension # Required: Communication with our extension
  - --talk-name=org.gnome.Shell                      # Required: Register global keyboard shortcuts

  # Filesystem access - Read files copied to clipboard
  - --filesystem=home:ro                             # Required: Read file contents when files are copied
  - --filesystem=xdg-config/autostart:create         # Required: Create autostart desktop file for "Start on Login"

modules:
  - name: tfcbm
    buildsystem: meson
    sources:
      - type: git
        url: https://github.com/dyslechtchitect/tfcbm.git
        tag: v1.0.1

